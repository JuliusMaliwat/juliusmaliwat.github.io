---
// Fixed contact icon bar shown on all pages.
// It reads email + social links from the profile data passed into the layout.
const { email, links = [] } = Astro.props;

const normalizeLabel = (value = "") => value.toLowerCase();
const findLink = (label) =>
  links.find((link) => normalizeLabel(link.label) === normalizeLabel(label))?.url;

const mailto = email ? `mailto:${email}` : "mailto:juliusmaliwat.work@gmail.com";
const githubUrl = findLink("GitHub");
const linkedinUrl = findLink("LinkedIn");
---

<footer class="fixed-contact" aria-label="Contact links">
  <!-- Email icon -->
  <a class="icon-button" href={mailto} aria-label="Email">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path
        d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm0 2 8 5 8-5"
        fill="none"
        stroke="currentColor"
        stroke-width="1.6"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  </a>

  <!-- GitHub icon -->
  {githubUrl && (
    <a
      class="icon-button"
      href={githubUrl}
      target="_blank"
      rel="noreferrer"
      aria-label="GitHub"
    >
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M12 2a10 10 0 0 0-3.16 19.49c.5.09.68-.22.68-.48v-1.7c-2.78.6-3.37-1.18-3.37-1.18-.45-1.14-1.1-1.44-1.1-1.44-.9-.62.07-.6.07-.6 1 .07 1.53 1.02 1.53 1.02.9 1.53 2.36 1.09 2.94.83.09-.65.35-1.09.64-1.34-2.22-.25-4.56-1.11-4.56-4.94 0-1.09.39-1.98 1.02-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02a9.5 9.5 0 0 1 5 0c1.9-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.02 1.59 1.02 2.68 0 3.84-2.35 4.68-4.58 4.93.36.32.69.94.69 1.9v2.82c0 .27.18.58.69.48A10 10 0 0 0 12 2z"
          fill="currentColor"
        />
      </svg>
    </a>
  )}

  <!-- LinkedIn icon -->
  {linkedinUrl && (
    <a
      class="icon-button"
      href={linkedinUrl}
      target="_blank"
      rel="noreferrer"
      aria-label="LinkedIn"
    >
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M4.98 3.5a2.5 2.5 0 1 0 .02 5 2.5 2.5 0 0 0-.02-5zM3 9h4v12H3zM9 9h3.8v1.64h.05c.53-1 1.84-2.06 3.78-2.06 4.05 0 4.8 2.66 4.8 6.12V21h-4v-5.5c0-1.31-.02-2.99-1.82-2.99-1.82 0-2.1 1.42-2.1 2.9V21H9z"
          fill="currentColor"
        />
      </svg>
    </a>
  )}
</footer>

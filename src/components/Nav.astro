---
// Top navigation with explicit variants:
// - home: section anchors
// - route: route links
// - brand-only: only site brand link
const currentPath = Astro.url.pathname;
const { variant: variantProp } = Astro.props;
const isHomePath = currentPath === "/";
const variant = variantProp ?? (isHomePath ? "home" : "route");

const homeLinks = [
  { label: "Experience", href: "#experience", section: "experience" },
  { label: "Skills", href: "#skills", section: "skills" },
  { label: "Projects", href: "#projects", section: "projects" },
];

const routeLinks = [
  { label: "Home", href: "/" },
  { label: "Projects", href: "/#projects" },
];

const links = variant === "home" ? homeLinks : variant === "route" ? routeLinks : [];
const showLinks = links.length > 0;

const isRouteActive = (href) => {
  if (!href.startsWith("/")) return false;
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
};
---

<header class:list={["site-nav-shell", variant === "brand-only" && "site-nav-shell--brand-only"]}>
  <nav class:list={["site-nav", variant === "brand-only" && "site-nav--brand-only"]} aria-label="Main">
    <a href="/" class="site-brand" aria-label="Homepage">
      <span class="brand-text">Julius.</span>
    </a>

    {showLinks && (
      <div class="site-nav-links">
        {links.map((link) => (
          <a
            href={link.href}
            data-nav-section={link.section ?? undefined}
            class:list={[
              "nav-link",
              variant === "route" && "nav-link--route",
              variant === "route" && isRouteActive(link.href) && "is-active",
            ]}
            aria-current={variant === "route" && isRouteActive(link.href) ? "page" : undefined}
          >
            {link.label}
          </a>
        ))}
      </div>
    )}
  </nav>
</header>
